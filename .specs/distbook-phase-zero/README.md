# Distbook Phase 0 Specifications

> **Suite**: Complete MCP Execution Path
> **Created**: 2026-01-19
> **Status**: Designed, Pending Validation

## Overview

These specifications define the work needed to complete the MCP execution infrastructure in Distbook, enabling notebook cells to be executed via MCP tools with structured result output.

## Spec Inventory

| Spec ID | Title | Priority | Phase | Status |
|---------|-------|----------|-------|--------|
| SPEC-DB-001 | TypeScript Compilation Fix | BLOCKING | 0.1 | Draft |
| SPEC-DB-002 | MCP Session Accessor | CRITICAL | 0.2 | Draft |
| SPEC-DB-003 | Buffered Execution Mode | HIGH | 0.3 | Draft |
| SPEC-DB-004 | Cell Execute Wiring | CRITICAL | 0.3 | Draft |
| SPEC-DB-005 | MCP Client Transport | MEDIUM | 0.4 | Draft (Optional) |

## Dependency Graph

```
SPEC-DB-001 (TypeScript Fix) ─────┬────► SPEC-DB-002 (Session Accessor)
                                  │
                                  ├────► SPEC-DB-003 (Buffered Execution)
                                  │
                                  └────► SPEC-DB-005 (MCP Client) [Optional]

SPEC-DB-002 + SPEC-DB-003 ────────────► SPEC-DB-004 (Cell Execute Wiring)
```

## Implementation Order

1. **SPEC-DB-001**: Fix TypeScript errors (unblocks everything)
2. **SPEC-DB-002**: Create session accessor (parallel with 003)
3. **SPEC-DB-003**: Add buffered execution (parallel with 002)
4. **SPEC-DB-004**: Wire cell_execute (requires 002 + 003)
5. **SPEC-DB-005**: MCP client transport (optional, parallel after 001)

## Phase Mapping

| Phase | Specs | Goal |
|-------|-------|------|
| 0.1 Foundation | DB-001 | Clean compilation |
| 0.2 Session Loading | DB-002 | Access session/cell data |
| 0.3 Execution | DB-003, DB-004 | Real code execution |
| 0.4 Client (Optional) | DB-005 | Connect to external servers |

## Estimated Total Effort

| Phase | Estimate |
|-------|----------|
| 0.1 | 1-2 hours |
| 0.2 | 1-2 hours |
| 0.3 | 2-3 hours |
| 0.4 | 2-3 hours (optional) |
| **Total** | **6-10 hours** (or 4-7 without 0.4) |

## Success Criteria

Phase 0 is complete when:
- [ ] `pnpm --filter @srcbook/api build` succeeds
- [ ] `cell_execute` returns real execution results
- [ ] Unit tests pass for session loading + execution
- [ ] Integration test: MCP tool → cell_execute → real output
- [ ] (Optional) Distbook can connect to Thoughtbox MCP server

## Source Documents

- **Plan**: `plans/feat-distbook-phase-zero-mcp-execution.md`
- **Master Plan**: `self-improvement/PLAN-cost-effective-self-improvement-loop.md`
- **Repository**: https://github.com/Kastalien-Research/distbook

---

**Generated by**: /specification-suite
**From**: plans/feat-distbook-phase-zero-mcp-execution.md
