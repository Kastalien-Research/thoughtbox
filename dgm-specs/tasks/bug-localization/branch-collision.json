{
  "id": "bug-loc-004-branch-collision",
  "variant": "clean",
  "name": "Branch Thought ID Collision",
  "description": "Branch thoughts with same thoughtNumber overwrite each other because node IDs don't include branchId",

  "gitCommit": "28856182df9e0394364874694b12cc90d3ab441c~1",
  "fixCommit": "28856182df9e0394364874694b12cc90d3ab441c",

  "errorMessage": "Branch thoughts collide - node IDs only use sessionId:thoughtNumber, missing branchId differentiation",

  "affectedFiles": [
    "src/persistence/storage.ts",
    "src/index.ts",
    "src/observatory/ui/observatory.html"
  ],
  "correctFile": "src/persistence/storage.ts",

  "successCriteria": "Update generateNodeId to use sessionId:branchId:thoughtNumber format for branch thoughts, keep sessionId:thoughtNumber for main chain",

  "expectedThoughtboxBenefit": "Thoughtbox isolation prevents getting distracted by UI code when fixing core ID generation logic",
  "estimatedTokens": 3500
}
