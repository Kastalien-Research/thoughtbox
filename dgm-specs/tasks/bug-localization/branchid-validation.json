{
  "id": "bug-loc-001-branchid-validation",
  "variant": "clean",
  "name": "BranchId Validation Bug",
  "description": "Agent uses branchId without branchFromThought, creating orphan nodes. Need to add validation.",

  "gitCommit": "87b86918efff2501a088c27ed07aabceb83a5ab2~1",
  "fixCommit": "87b86918efff2501a088c27ed07aabceb83a5ab2",

  "errorMessage": "Thoughts with branchId but no branchFromThought become orphan nodes with no prev/next/branchOrigin linkage",

  "affectedFiles": [
    "src/thought-handler.ts",
    "src/server-factory.ts"
  ],
  "correctFile": "src/thought-handler.ts",

  "successCriteria": "Validation added that rejects branchId without branchFromThought, with clear error message",

  "expectedThoughtboxBenefit": "Thoughtbox isolation helps focus on structural constraints without distraction from unrelated code",
  "estimatedTokens": 3000
}
